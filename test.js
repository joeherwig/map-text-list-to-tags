let harmonizeTags = require('C:\\Users\\jherwig\\projects\\innotec-text-to-tag-mapping')
let vehicle = {
  "equipments": {
    "equipment": [
      {
        "type": "standard",
        "text": "Karosserie 5-türig"
      },
      {
        "type": "standard",
        "text": "Metallic-Lackierung"
      },
      {
        "type": "standard",
        "text": "Dachreling"
      },
      {
        "type": "standard",
        "text": "Leuchtweitenregulierung"
      },
      {
        "type": "standard",
        "text": "Ndebelscheinwerfer"
      },
      {
        "type": "standard",
        "text": "Heckscheibenwischer mit Intervallschaltung"
      },
      {
        "type": "standard",
        "text": "Kotflügelverbreiterung"
      },
      {
        "type": "standard",
        "text": "Verglasung getönt"
      },
      {
        "type": "standard",
        "text": "Heckscheibe heizbar"
      },
      {
        "type": "standard",
        "text": "Drehzahlmesser"
      },
      {
        "type": "standard",
        "text": "Zeituhr (Digital)"
      },
      {
        "type": "standard",
        "text": "abstandsgeregelte Geschwindigkeits-Regelanlage (Tempomat)"
      },
      {
        "type": "standard",
        "text": "Airbag Fahrer- und Beifahrerseite"
      },
      {
        "type": "standard",
        "text": "Gepäckraumabdeckung / Rollo"
      },
      {
        "type": "standard",
        "text": "Klimaanlage"
      },
      {
        "type": "standard",
        "text": "Sportsitze vorn"
      },
      {
        "type": "standard",
        "text": "Sitze vorn elektr. verstellbar"
      },
      {
        "type": "standard",
        "text": "Lendenwirbelstütze an Sitz vorn links (elektr. verstellbar)"
      },
      {
        "type": "standard",
        "text": "Lendenwirbelstütze an Sitz vorn rechts (elektr. verstellbar)"
      },
      {
        "type": "standard",
        "text": "Kopfstützen hinten"
      },
      {
        "type": "standard",
        "text": "Zentralverriegelung mit Fernbedienung"
      },
      {
        "type": "standard",
        "text": "Sonnenblende links mit Spiegel (beleuchtet)"
      },
      {
        "type": "standard",
        "text": "Sonnenblende rechts mit Spiegel (beleuchtet)"
      },
      {
        "type": "standard",
        "text": "Diebstahlwarnanlage"
      },
      {
        "type": "standard",
        "text": "Wegfahrsperre"
      },
      {
        "type": "standard",
        "text": "Bremsscheiben innenbelüftet"
      },
      {
        "type": "standard",
        "text": "Scheibenbremse hinten"
      },
      {
        "type": "standard",
        "text": "Niveauregulierung"
      },
      {
        "type": "standard",
        "text": "Stahlfelgen 7 J x 16"
      },
      {
        "type": "standard",
        "text": "Reifen P255/70 R16 ...S"
      },
      {
        "type": "standard",
        "text": "Lenkrad (Leder)"
      },
      {
        "type": "standard",
        "text": "Lenksäule (Lenkrad) höhenverstellbar"
      },
      {
        "type": "standard",
        "text": "Servolenkung"
      },
      {
        "type": "standard",
        "text": "Sperrdifferential"
      },
      {
        "type": "standard",
        "text": "Antriebsart: Alldradantrieb zuschaltbar"
      },
      {
        "type": "standard",
        "text": "Radstand 2835 mm"
      },
      {
        "type": "standard",
        "text": "Getriebe Automatik (5-Stufen)"
      },
      {
        "type": "special",
        "text": "Isofix Kindersitz 1-4 Jahre"
      },
      {
        "type": "standard",
        "text": "Motor 4,0 Ltr. - 152 kW V6 KAT"
      },
      {
        "type": "standard",
        "text": "Karosserie 5-türig"
      },
      {
        "type": "standard",
        "text": "Metallic-Lackierung"
      },
      {
        "type": "standard",
        "text": "Dachreling"
      },
      {
        "type": "standard",
        "text": "Leuchtweitenregulierung"
      },
      {
        "type": "standard",
        "text": "Heckscheibenwischer mit Intervallschaltung"
      },
      {
        "type": "standard",
        "text": "Kotflügelverbreiterung"
      },
      {
        "type": "standard",
        "text": "Verglasung getönt"
      },
      {
        "type": "standard",
        "text": "Heckscheibe heizbar"
      },
      {
        "type": "standard",
        "text": "Drehzahlmesser"
      },
      {
        "type": "standard",
        "text": "Zeituhr (Digital)"
      },
      {
        "type": "standard",
        "text": "Geschwindigkeits-Regelanlage (Tempomat)"
      },
      {
        "type": "standard",
        "text": "Airbag Fahrer- und Beifahrerseite"
      },
      {
        "type": "standard",
        "text": "Gepäckraumabdeckung / Rollo"
      },
      {
        "type": "standard",
        "text": "Klimaanlage"
      },
      {
        "type": "standard",
        "text": "Sportsitze vorn"
      },
      {
        "type": "standard",
        "text": "Sitze vorn elektr. verstellbar"
      },
      {
        "type": "standard",
        "text": "Lendenwirbelstütze an Sitz vorn links (elektr. verstellbar)"
      },
      {
        "type": "standard",
        "text": "Lendenwirbelstütze an Sitz vorn rechts (elektr. verstellbar)"
      },
      {
        "type": "standard",
        "text": "Kopfstützen hinten"
      },
      {
        "type": "standard",
        "text": "Zentralverriegelung mit Fernbedienung"
      },
      {
        "type": "standard",
        "text": "Sonnenblende links mit Spiegel (beleuchtet)"
      },
      {
        "type": "standard",
        "text": "Sonnenblende rechts mit Spiegel (beleuchtet)"
      },
      {
        "type": "standard",
        "text": "Diebstahlwarnanlage"
      },
      {
        "type": "standard",
        "text": "Wegfahrsperre"
      },
      {
        "type": "standard",
        "text": "Bremsscheiben innenbelüftet"
      },
      {
        "type": "standard",
        "text": "Scheibenbremse hinten"
      },
      {
        "type": "standard",
        "text": "Niveauregulierung"
      },
      {
        "type": "standard",
        "text": "Stahlfelgen 7 J x 16"
      },
      {
        "type": "standard",
        "text": "Reifen P255/70 R16 ...S"
      },
      {
        "type": "standard",
        "text": "Lenkrad (Leder)"
      },
      {
        "type": "standard",
        "text": "Lenksäule (Lenkrad) höhenverstellbar"
      },
      {
        "type": "standard",
        "text": "Servolenkung"
      },
      {
        "type": "standard",
        "text": "Sperrdifferential"
      },
      {
        "type": "standard",
        "text": "Antriebsart: Allradantrieb zuschaltbar"
      },
      {
        "type": "standard",
        "text": "Radstand 2835 mm"
      },
      {
        "type": "standard",
        "text": "Getriebe Automatik (5-Stufen)"
      },
      {
        "type": "standard",
        "text": "4WD"
      },
      {
        "type": "standard",
        "text": "Motor 4,0 Ltr. - 152 kW V6 KAT"
      }
    ]
  }
}
let mapping = [
  {
    "find": ".*Allrad.*",
    "tag": "AWD"
  },
  {
    "find": ".*4WD.*",
    "tag": "AWD"
  },
  {
    "find": ".*AWD.*",
    "tag": "AWD"
  },
  {
    "find": ".*Sitz.*elektr.*",
    "tag": "electric adjustable seats"
  },
  {
    "find": ".*elektr.*Sitz.*",
    "tag": "electric adjustable seats"
  },
  {
    "find": ".*Nebelscheinwerfer.*",
    "tag": "fogg headlights"
  },
  {
    "find": ".*Geschwindigkeits.*(regel|kontroll).*",
    "tag": "cruise control"
  },
  {
    "find": "adaptive.*Geschwindigkeits.*(regel|kontroll).*",
    "tag": "adaptive cruise control"
  },
  {
    "find": "Abstand.*Geschwindigkeits.*(regel|kontroll).*",
    "tag": "adaptive cruise control"
  },
  {
    "find": ".*Tempomat.*",
    "tag": "cruise control"
  },
  {
    "find": ".*ACC.*",
    "tag": "cruise control"
  },
  {
    "find": ".*ACC.*",
    "tag": "adaptive cruise control"
  },
  {
    "find": ".*CD.*Wechsler*",
    "tag": "CD changer"
  }
]

/* vehicleSearchTagMapping.json
function loadJSON(callback) {
  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
  xobj.open('GET', 'vehicleSearchTagMapping.json', true);
  xobj.onreadystatechange = function() {
    if (xobj.readyState == 4 && xobj.status == "200") {
      // .open will NOT return a value but simply returns undefined in async mode so use a callback
      callback(xobj.responsetext);
    }
  }
  xobj.send(null);
}

loadJSON(function(response) {
mapping = JSON.parse(response);
console.log(mapping);
});*/

let arrayOfObjects = vehicle.equipments.equipment

// let searchtags = harmonizeTags.getTags(arrayOfObjects, mapping, {"array":"vehicle.equipments.equipment", "element":"text"})
let searchtags = harmonizeTags.getTags(arrayOfObjects, mapping)
console.log(searchtags)
